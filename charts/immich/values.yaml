immich:
  persistence:
    external:
      storageClass: nfs-client
      size: 1Ti
      accessMode: ReadWriteOnce
    library:
      storageClass: nfs-client
      size: 1Ti
      accessMode: ReadWriteOnce
    machine-learning-cache:
      storageClass: nfs-client
      size: 10Gi
      accessMode: ReadWriteOnce

  controllers:
    server:
      containers:
        main:
          env:
            # TODO replace with immich.config once we know the values to put there
            IMMICH_CONFIG_FILE: null

  defaultPodOptions:
    affinity:
      nodeAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 1
            preference:
              matchExpressions:
                - key: kubernetes.io/role
                  operator: In
                  values:
                    - worker

  postgresql:
    global:
      postgresql:
        auth:
          password: TODOCHANGEME
    primary:
      persistence:
        storageClass: nfs-client
        size: 1Gi
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: kubernetes.io/role
                    operator: In
                    values:
                      - worker
